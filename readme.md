# 8bit BGM generator

8bit BGM generator は、「作曲スキルがないけど、Pyxel の自作ゲームに BGM を入れたい」という方のための BGM 自動生成ツールです。

Pyxel をお持ちの方でなくても、ブラウザ版で体験いただくことができます。また、生成した曲を mp3 などの音声ファイルとして録音したり、MIDI ファイルとして出力した上で加工することで、Pyxel 以外のレトロゲーム開発や動画の BGM 等に使っていただくことも可能です（詳しくは後述）。

問題点を発見したり、要望がある方は、Twitter [frenchbread](https://twitter.com/frenchbread1222) (@frenchbread1222) まで DM 等でお知らせください。

## 自動生成の仕様

8 小節、3 または 4 パートの曲を生成します。パート編成は以下から選べます。

- メロディ＋リバーブ（ディレイ）＋ベース
- メロディ＋ベース＋ドラム
- メロディ＋サブメロディ＋ベース
- メロディ＋サブメロディ＋ベース＋ドラム

3 チャンネル編成で生成した曲を Pyxel で取り込んだ場合、残りの 1 チャンネルを効果音用に自由に使えます。（4 チャンネル編成にする場合も、効果音の再生時に一時的に曲を止めることによって BGM と効果音を両立できます。）

テンポ、コード進行、ベースとドラムのリズムなどは登録されているパターンから指定します。メロディは自動生成ですが、パラメータによりある程度調整することもできます。

よくわからないという方は、とりあえず「きほん」タブの「プリセット」を適当に選択してみてください。その後でテンポを変えたり、リズムを差し替えることで、好みの曲調に近づけることができると思います。

## ツールの使い方

- ブラウザ上で動かす場合： https://retro-bgm-generator.web.app/ （スマートフォンでも動きますが、画面が小さく操作しづらいのと、作成した曲をエクスポートするのが困難なので、お試し用途以外は PC からアクセスください。）
- ローカル環境で動かす場合： このリポジトリをダウンロードして、`pyxel play 8bit-bgm-gen` を実行してください。また、MIDI ファイルの出力をしたい場合、事前に `pip install mido` コマンドを実行して mido をインストールしてください。

※ブラウザ版では MIDI ファイルの出力ができません。MIDI ファイルを出力したい場合、Python および Pyxel をインストールした上でローカル環境で動かしていただく必要があります。

## 自動生成した曲を使うには？

### ①Pyxel で使う場合

Pyxel のサウンド仕様に沿ったテキストデータが json ファイルとして出力されるので、これをゲーム本体のスクリプトで読み込んで再生する形になります。（リポジトリ内の play.py 参照。）

### ②Pyxel 以外で使いたい場合

以下の 2 つの方法があります。

- 8bit BGM generator で MIDI ファイルを出力します。この MIDI ファイルを直接プログラムから再生したり、お使いの DAW などで オーディオ形式のファイル（mp3, wav etc）を生成することで、多様な環境でお使いいただけます。ただし、8bit BGM generator で設定した音色は MIDI ファイルには反映されませんので、お使いの環境にあわせて音源を設定したり、音域をオクターブ単位で調整したりすることを推奨します。
- たとえば Chrome の拡張機能[「Chrome Audio Capture」](https://chrome.google.com/webstore/detail/chrome-audio-capture/kfokdmfpdnokpmpbjhjbcabgligoelgp) などを使うことで、ブラウザ上で鳴らしているシステムサウンドを mp3 ファイルなどに録音することができます。実際にゲームなどで使う場合は、無音部分のトリム編集などが必要になってきます。

## チュートリアル動画

[こちらをご覧ください（Youtube が開きます）](https://youtu.be/aacS2atOeQ4)

※この動画は ver1.00 時点のものなので現在のバージョンと少し仕様が異なっています。ご了承ください。

## 更新履歴

2023/10/14 Ver1.21 mido インストール時にエラーとなる問題を修正

2023/10/10 Ver1.20 MIDI 出力機能をサポート

2023/09/23 Ver1.10 メロディ生成アルゴリズム改善、サブメロディ生成に対応

2023/09/09 Ver1.02 ブラウザ版のエクスポートに対応

2023/06/01 Ver1.01 Windows でローカル実行時にファイル保存できないバグを修正

2023/05/08 Ver1.00 初版リリース
